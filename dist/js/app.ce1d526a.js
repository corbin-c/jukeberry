(function(t){function e(e){for(var r,a,o=e[0],u=e[1],c=e[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={app:0},i={app:0},s=[];function o(t){return u.p+"js/"+({list:"list"}[t]||t)+"."+{list:"eeaf01a4"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={list:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({list:"list"}[t]||t)+"."+{list:"2745fbb3"}[t]+".css",i=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===i))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],l=c.getAttribute("data-href");if(l===r||l===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var r=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[t],p.parentNode.removeChild(p),n(s)},p.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){a[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(p);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}i[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"118a":function(t,e,n){},"11a3":function(t,e,n){"use strict";n("d549")},"204c":function(t,e,n){"use strict";n("9ebd")},2059:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:t.modal?"modal":""},[t.modal?n("div",[n("label",{attrs:{for:"create"}},[t._v("Créez une nouvelle playlist…")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"create",id:"create"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("button",{on:{click:function(e){return t.createPlaylist()}}},[n("MaterialIcon",{attrs:{icon:"queue_music"}})],1),t.list.length>0?n("p",[t._v("…ou sélectionnez-en une ci-dessous :")]):t._e()]):t._e(),n("ul",{class:t.modal?"modal":""},[!t.modal&&t.id?n("li",{staticClass:"parent"},[n("router-link",{attrs:{to:"/playlist/"}},[n("MaterialIcon",{attrs:{icon:"arrow_back"}})],1)],1):t._e(),t._l(t.list,(function(e,r){return n("PlayListItem",{key:r,attrs:{index:r,id:parseInt(e.id),modal:t.modal,path:t.path,playlistId:parseInt(t.id),name:e.name||e}})}))],2)])},a=[],i=n("1da1"),s=(n("b0c0"),n("96cf"),n("3de3")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:t.classList.join(" "),attrs:{draggable:!t.isPlaylist},on:{dragstart:t.move,dragenter:t.dragEnter,dragleave:t.dragLeave,dragend:t.hasMoved,dragover:t.dragover,drop:t.drop}},[t.isPlaylist?t._e():n("MaterialIcon",{staticClass:"order",attrs:{icon:"reorder"}}),n("span",{on:{click:function(e){return t.addToPlaylist()}}},[t._v(" "+t._s(t.fileName)+" ")]),t.isPlaylist&&!t.modal?n("div",{staticClass:"actions"},[n("button",{on:{click:function(e){return t.playList()}}},[n("MaterialIcon",{attrs:{icon:"playlist_play"}})],1),n("button",{on:{click:function(e){return t.shuffle()}}},[n("MaterialIcon",{attrs:{icon:"shuffle"},on:{click:function(e){return t.shuffle()}}})],1),n("button",{on:{click:function(e){return t.remove()}}},[n("MaterialIcon",{attrs:{icon:"delete"}})],1),n("router-link",{attrs:{to:"/playlist/"+t.id}},[n("MaterialIcon",{attrs:{icon:"view_list"}})],1)],1):t.isPlaylist||t.modal?t._e():n("div",{staticClass:"actions"},[n("button",{on:{click:function(e){return t.playSong()}}},[n("MaterialIcon",{attrs:{icon:"playlist_play"}})],1),n("button",{on:{click:function(e){return t.remove()}}},[n("MaterialIcon",{attrs:{icon:"delete"}})],1)])],1)},u=[],c=(n("caad"),n("2532"),n("4de4"),n("a9e3"),n("b01f")),l={name:"PlayListItem",data:function(){return{classList:[],isMoving:!1}},components:{MaterialIcon:s["a"]},computed:{isPlaylist:function(){return!isNaN(this.id)},fileName:function(){return this.isPlaylist?this.name:this.$root.cleanFileName(this.name)}},methods:{playlistAdd:function(){this.$root.showModal("playlist","CURRENT_MEDIA")},dragover:function(t){t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="move",this.classList.includes("over")||this.isMoving||this.classList.push("over")},drop:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this.classList=[],this.$parent.organize(this.name,t.dataTransfer.getData("text/plain"))},dragEnter:function(){this.isMoving||this.classList.push("over")},dragLeave:function(){this.classList=this.classList.filter((function(t){return"over"!=t}))},move:function(t){console.log("moving"),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",this.name),this.classList.push("moving"),this.isMoving=!0},hasMoved:function(){this.classList=this.classList.filter((function(t){return"moving"!=t})),this.isMoving=!1},addToPlaylist:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.modal){e.next=6;break}return e.next=3,c["a"].addToPlaylist(t.id,t.path);case 3:n=e.sent,t.$root.hideModal(),n.error?t.$root.showNotification(n.error):t.$root.showNotification("'"+t.$root.cleanFileName(t.path)+"' a été ajouté à la playlist '"+t.name+"'");case 6:case"end":return e.stop()}}),e)})))()},remove:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Êtes-vous sûr ce vouloir supprimer cet élément ?")){e.next=2;break}return e.abrupt("return");case 2:if(!t.isPlaylist){e.next=9;break}return e.next=5,c["a"].removePlaylist(t.id);case 5:t.$parent.list=e.sent,t.$root.showNotification("La playlist '"+t.name+"' a été supprimée."),e.next=13;break;case 9:return e.next=11,c["a"].removeTrack(t.playlistId,t.name);case 11:t.$parent.list=e.sent,t.$root.showNotification("La piste '"+t.$root.cleanFileName(t.name)+"' a été supprimée de la playlist.");case 13:case"end":return e.stop()}}),e)})))()},playList:function(){c["a"].play("playlist",parseInt(this.id))},playSong:function(){c["a"].play("playlist",parseInt(this.playlistId),parseInt(this.index))},shuffle:function(){c["a"].play("playlist",parseInt(this.id),0,!0)}},props:{index:Number,id:Number,playlistId:Number,name:String,path:String,modal:Boolean}},d=l,p=(n("11a3"),n("2877")),m=Object(p["a"])(d,o,u,!1,null,"3e557a12",null),f=m.exports,h={name:"Playlist",components:{PlayListItem:f,MaterialIcon:s["a"]},data:function(){return{name:"",list:[]}},watch:{id:function(){this.getList()}},mounted:function(){this.getList()},methods:{organize:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=n.list.indexOf(t),r.next=3,c["a"].organizePlaylist(parseInt(n.id),e,a);case 3:n.list=r.sent;case 4:case"end":return r.stop()}}),r)})))()},getList:function(){this.id?this.getPlaylist(parseInt(this.id)):this.allPlaylists()},getPlaylist:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getPlaylist(e);case 2:n=t.sent,this.list=n;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),allPlaylists:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].allPlaylists();case 2:e=t.sent,this.list=e;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createPlaylist:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].createPlaylist(this.name,this.path);case 2:e=t.sent,this.list=e,this.modal&&this.$root.hideModal(),this.$root.showNotification("La playlist '"+this.name+"' a été créée.<br>'"+this.$root.cleanFileName(this.path)+"' y a été ajouté.");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},props:{id:String,path:String,modal:Boolean}},v=h,g=(n("60a2"),Object(p["a"])(v,r,a,!1,null,"658f5b07",null));e["default"]=g.exports},"3de3":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"material-icons-outlined"},[t._v(t._s(t.icon))])},a=[],i={name:"MaterialIcon",props:{icon:String}},s=i,o=n("2877"),u=Object(o["a"])(s,r,a,!1,null,null,null);e["a"]=u.exports},"46ac":function(t,e,n){"use strict";n("a799")},"555a":function(t,e,n){t.exports=n.p+"img/icon.72ed350e.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("ac1f"),n("1276"),n("fb6a"),n("a15b"),n("5319");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{attrs:{id:"app"}},[r("header",[r("figure",{on:{click:function(e){return t.showNav()}}},[r("img",{attrs:{src:n("555a")}})]),r("nav",{class:t.navShown?"shown":"hidden",on:{click:function(e){return t.showNav()}}},[r("ul",[r("li",[r("router-link",{attrs:{to:"/"}},[t._v("Jukeberry")])],1),r("li",[r("router-link",{attrs:{to:"/music"}},[t._v("Musique")])],1),r("li",[r("router-link",{attrs:{to:"/radio"}},[t._v("Radio")])],1),r("li",[r("router-link",{attrs:{to:"/playlist"}},[t._v("Playlist")])],1),r("li",[r("router-link",{attrs:{to:"/search/music"}},[t._v("Recherche")])],1)])]),r("router-link",{attrs:{to:"/"}},[r("h1",[t._v("Jukeberry")])])],1),r("router-view"),r("Footer",{attrs:{status:t.status}}),r("Modal",{attrs:{shown:t.$root.modalShown,child:t.$root.modalChild,parameter:t.$root.modalParameter}}),t.$root.notificationShown?r("div",{attrs:{id:"notification"},domProps:{innerHTML:t._s(t.$root.notificationText)}}):t._e()],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.shown?n("div",{attrs:{id:"modal"}},[n("div",{attrs:{id:"modal_overlay"},on:{click:function(e){return t.closeModal()}}}),n("div",{attrs:{id:"modal_content"}},[n("button",{on:{click:function(e){return t.closeModal()}}},[n("MaterialIcon",{attrs:{icon:"cancel"}})],1),n("Playlist",{attrs:{modal:!0,path:t.parameter}})],1)]):n("div",{attrs:{id:"hiddenmodal"}})},o=[],u=n("3de3"),c=n("2059"),l={name:"Modal",props:{child:String,shown:Boolean,parameter:String},methods:{closeModal:function(){this.$root.hideModal()}},components:{Playlist:c["default"],MaterialIcon:u["a"]}},d=l,p=(n("a317"),n("2877")),m=Object(p["a"])(d,s,o,!1,null,"9e7add64",null),f=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{class:t.status.playing&&t.status.playing.metadata&&t.isDrawerOpen?"open":"",on:{touchstart:t.touchStart,touchmove:t.touchMove}},[n("transition",{attrs:{name:"fade"}},[t.status.playing&&t.status.playing.metadata&&t.isDrawerOpen?n("Metadata",{attrs:{status:t.status}}):t._e()],1),t.status.playing&&t.status.playing.metadata?n("h2",[n("MaterialIcon",{attrs:{icon:t.icon}}),t._v(" "+t._s(t.status.playing.metadata.title||t.$root.cleanFileName(t.status.playing.metadata.filename)))],1):t._e(),n("Controls",{attrs:{status:t.status}}),n("button",{on:{click:t.toggleDrawer}},[n("MaterialIcon",{class:t.isDrawerOpen?"open":"",attrs:{icon:"expand_less",id:"expand"}})],1)],1)},v=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.status.ready?n("ul",[n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.command("prev")}}},[n("MaterialIcon",{attrs:{icon:"skip_previous"}})],1)]),n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.command("rewind")}}},[n("MaterialIcon",{attrs:{icon:"fast_rewind"}})],1)]),n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.command("togglePlay")}}},[t.status.playing&&!t.status.playing.paused?n("MaterialIcon",{attrs:{icon:"pause_circle"}}):n("MaterialIcon",{attrs:{icon:"play_circle"}})],1)]),n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.command("forward")}}},[n("MaterialIcon",{attrs:{icon:"fast_forward"}})],1)]),n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.command("next")}}},[n("MaterialIcon",{attrs:{icon:"skip_next"}})],1)]),n("li",[n("button",{attrs:{disabled:!t.status.playing},on:{click:function(e){return t.stop()}}},[n("MaterialIcon",{attrs:{icon:"stop_circle"}})],1)])]):n("ul")},y=[],b=n("b01f"),w={name:"Controls",components:{MaterialIcon:u["a"]},props:{status:status},methods:{stop:function(){b["a"].stop()},command:function(t){b["a"].sendCommand(t)}}},k=w,_=(n("e42d"),Object(p["a"])(k,g,y,!1,null,"7470e6e8",null)),x=_.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",[n("figure",[n("img",{attrs:{src:t.currentPicture},on:{click:t.nextPicture}})]),t.status.playing?n("button",{on:{click:function(e){return t.playlistAdd()}}},[n("MaterialIcon",{attrs:{icon:"playlist_add"}}),t._v(" Ajouter à la playlist ")],1):t._e(),n("dl",[t.md.album?n("dt",[n("MaterialIcon",{attrs:{icon:"album"}})],1):t._e(),t.md.album?n("dd",[t._v(" "+t._s(t.md.album)+" ")]):t._e(),t.md.artist?n("dt",[n("MaterialIcon",{attrs:{icon:"face"}})],1):t._e(),t.md.artist?n("dd",[t._v(" "+t._s(t.md.artist)+" ")]):t._e(),t.md.genre?n("dt",[n("MaterialIcon",{attrs:{icon:"speaker"}})],1):t._e(),t.md.genre?n("dd",[t._v(" "+t._s(t.md.genre.join(", "))+" ")]):t._e(),t.md.artistDetails&&(t.md.artistDetails.instruments||t.md.artistDetails.members)?n("dt",[n("MaterialIcon",{attrs:{icon:"piano"}})],1):t._e(),t.md.artistDetails&&(t.md.artistDetails.instruments||t.md.artistDetails.members)?n("dd",[t._v(" "+t._s((t.md.artistDetails.instruments||t.md.artistDetails.members).join(", "))+" ")]):t._e(),t.md.artistDetails&&t.md.artistDetails.occupations?n("dt",[n("MaterialIcon",{attrs:{icon:"emoji_symbols"}})],1):t._e(),t.md.artistDetails&&t.md.artistDetails.occupations?n("dd",[t._v(" "+t._s(t.md.artistDetails.occupations.join(", "))+" ")]):t._e(),t.md.artistDetails&&(t.md.artistDetails.birthYear||t.md.artistDetails.deathYear)?n("dt",[n("MaterialIcon",{attrs:{icon:"cake"}})],1):t._e(),t.md.artistDetails&&(t.md.artistDetails.birthYear||t.md.artistDetails.deathYear)?n("dd",[t._v(" "+t._s([t.md.artistDetails.birthYear||"…",t.md.artistDetails.deathYear||"…"].join(" – "))+" ")]):t._e(),t.md.artistDetails&&(t.md.artistDetails.startYear||t.md.artistDetails.endYear)?n("dt",[n("MaterialIcon",{attrs:{icon:"cake"}})],1):t._e(),t.md.artistDetails&&(t.md.artistDetails.startYear||t.md.artistDetails.endYear)?n("dd",[t._v(" "+t._s([t.md.artistDetails.startYear||"…",t.md.artistDetails.endYear||"…"].join(" – "))+" ")]):t._e(),t.md.artistDetails&&(t.md.artistDetails.country||t.md.artistDetails.birthplace)?n("dt",[n("MaterialIcon",{attrs:{icon:"map"}})],1):t._e(),t.md.artistDetails&&(t.md.artistDetails.country||t.md.artistDetails.birthplace)?n("dd",[t._v(" "+t._s([t.md.artistDetails.birthplace,t.md.artistDetails.country].join(", "))+" ")]):t._e(),t.md.composer?n("dt",[n("MaterialIcon",{attrs:{icon:"emoji_objects"}})],1):t._e(),t.md.composer?n("dd",[t._v(" "+t._s(t.md.composer[0])+" ")]):t._e(),t.md.artistDetails&&t.md.artistDetails.description?n("dt",[n("MaterialIcon",{attrs:{icon:"description"}})],1):t._e(),t.md.artistDetails&&t.md.artistDetails.description&&t.descriptionShown?n("dd",{on:{click:t.toggleDescription}},[t._v(" "+t._s(t.md.artistDetails.description)+" ")]):t._e(),t.md.artistDetails&&t.md.artistDetails.description&&!t.descriptionShown?n("dd",{on:{click:t.toggleDescription}},[t._v(" Description ")]):t._e(),t.md.year?n("dt",[n("MaterialIcon",{attrs:{icon:"calendar_today"}})],1):t._e(),t.md.year?n("dd",[t._v(" "+t._s(t.md.year)+" ")]):t._e(),t.md.label?n("dt",[n("MaterialIcon",{attrs:{icon:"equalizer"}})],1):t._e(),t.md.label?n("dd",[t._v(" "+t._s(t.md.label[0])+" ")]):t._e(),t.md.albumDetails&&t.md.albumDetails.studio?n("dt",[n("MaterialIcon",{attrs:{icon:"headphones"}})],1):t._e(),t.md.albumDetails&&t.md.albumDetails.studio?n("dd",[t._v(" "+t._s(t.md.albumDetails.studio)+" ")]):t._e(),t.md.albumDetails&&t.md.albumDetails.producer?n("dt",[n("MaterialIcon",{attrs:{icon:"work"}})],1):t._e(),t.md.albumDetails&&t.md.albumDetails.producer?n("dd",[t._v(" "+t._s(t.md.albumDetails.producer)+" ")]):t._e(),t.md.albumDetails&&(t.md.albumDetails.wikiUrl.length||t.md.artistDetails.wikiUrl.length)?n("dt",[n("MaterialIcon",{attrs:{icon:"auto_stories"}})],1):t._e(),t.md.albumDetails&&(t.md.albumDetails.wikiUrl.length||t.md.artistDetails.wikiUrl.length)?n("dd",t._l((t.md.albumDetails.wikiUrl||[]).concat(t.md.artistDetails.wikiUrl||[]),(function(e,r){return n("a",{key:r,attrs:{href:e}},[t._v(" "+t._s(t.wikiUrlToLabel(e))+" ")])})),0):t._e()])])},M=[],D=n("1da1"),I=n("2909"),P=(n("96cf"),n("b64b"),n("99af"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("466d"),{name:"Metadata",data:function(){return{metadata:{},md:{},pictureIndex:0,allPictures:[],gettingMetadata:!1,descriptionShown:!1}},props:{status:status},watch:{status:function(t,e){t.playing.metadata.album==e.playing.metadata.album&&t.playing.metadata.artist==e.playing.metadata.artist&&Object.keys(this.metadata).length>0||this.getMetadata()}},computed:{currentPicture:function(){return this.allPictures.length?this.allPictures[this.pictureIndex]:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Topeka-music.svg/768px-Topeka-music.svg.png"}},mounted:function(){this.getMetadata()},methods:{playlistAdd:function(){this.$root.showModal("playlist","CURRENT_MEDIA")},preparePictures:function(){var t=[];this.md.picture&&t.push(this.md.picture),this.md.albumDetails&&this.md.albumDetails.images&&(t=[].concat(Object(I["a"])(t),Object(I["a"])(this.md.albumDetails.images))),this.md.artistDetails&&this.md.artistDetails.images&&(t=[].concat(Object(I["a"])(t),Object(I["a"])(this.md.artistDetails.images))),this.allPictures=Object(I["a"])(new Set(t))},nextPicture:function(){this.pictureIndex+=1,this.pictureIndex==this.allPictures.length&&(this.pictureIndex=0)},toggleDescription:function(){this.descriptionShown=!this.descriptionShown},wikiUrlToLabel:function(t){var e=t.match(/(\w+?)(?=\.)/)[0],n=decodeURIComponent(t.split("/").slice(-1)[0].replace(/_/g," "));return n+" ["+e+"]"},getMetadata:function(){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.gettingMetadata){e.next=2;break}return e.abrupt("return");case 2:return t.allPictures=[],t.pictureIndex=0,t.md=t.status.playing.metadata,t.preparePictures(),t.gettingMetadata=!0,e.next=9,b["a"].getMetadata();case 9:t.metadata=e.sent,t.gettingMetadata=!1,t.md=t.metadata,t.preparePictures();case 13:case"end":return e.stop()}}),e)})))()}},components:{MaterialIcon:u["a"]}}),j=P,O=(n("d132"),Object(p["a"])(j,R,M,!1,null,"11ada70a",null)),S=O.exports,T={name:"Footer",data:function(){return{isDrawerOpen:!1,firstTouch:{x:null,y:null}}},props:{status:status},methods:{toggleDrawer:function(){this.isDrawerOpen=!this.isDrawerOpen},openDrawer:function(){this.status.playing&&this.status.playing.metadata&&(this.isDrawerOpen=!0)},closeDrawer:function(){this.isDrawerOpen=!1},getCoords:function(t){var e=t.touches[0];return{x:e.clientX,y:e.clientY}},touchStart:function(t){var e=this.getCoords(t);this.firstTouch.x=e.x,this.firstTouch.y=e.y},touchMove:function(t){if(this.firstTouch.x&&this.firstTouch.y){var e=this.getCoords(t),n={x:this.firstTouch.x-e.x,y:this.firstTouch.y-e.y};Math.abs(n.x)<Math.abs(n.y)&&(n.y>0?this.openDrawer():this.closeDrawer()),this.firstTouch.x=null,this.firstTouch.y=null}}},computed:{icon:function(){if(this.status.playing){if(this.status.playing.paused)return"pause";switch(this.status.playing.mode){case"podcast":return"podcasts";case"radio":return"radio";case"music":return"music_note";case"youtube":return"ondemand_video";case"video":return"movie";default:return"headphones"}}}},components:{Controls:x,MaterialIcon:u["a"],Metadata:S}},q=T,L=(n("46ac"),Object(p["a"])(q,h,v,!1,null,"52544760",null)),N=L.exports,$={name:"Jukeberry",data:function(){return{status:{},navShown:!1,ws:!1,wsInterval:!1}},methods:{checkWS:function(){var t=this;this.wsInterval||(this.wsInterval=setInterval((function(){t.ws&&1===t.ws.readyState||t.initWS()}),1e4))},showNav:function(){this.navShown=!this.navShown},initWS:function(){var t=this;console.log("reset websockets"),this.ws=new WebSocket("ws://"+window.location.host),this.ws.onmessage=function(e){t.status=JSON.parse(e.data),console.log(JSON.parse(e.data))},this.ws.onclose=function(){t.initWS()},this.ws.onerror=function(){t.initWS()}}},mounted:function(){this.checkWS(),this.ws||this.initWS()},components:{Footer:N,Modal:f}},C=$,E=(n("efc4"),Object(p["a"])(C,a,i,!1,null,null,null)),A=E.exports,F=n("8c4f"),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("ul",[n("li",[n("MaterialIcon",{attrs:{icon:"music_note"}}),n("router-link",{attrs:{to:"/music"}},[t._v(" Musique ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"shuffle"}}),n("a",{attrs:{href:"#"},on:{click:function(e){return t.shuffleAll()}}},[t._v(" Aléatoire ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"radio"}}),n("router-link",{attrs:{to:"/radio"}},[t._v(" Radio ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"podcasts"}}),n("router-link",{attrs:{to:"/podcasts"}},[t._v(" Podcasts ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"playlist_play"}}),n("router-link",{attrs:{to:"/playlist"}},[t._v(" Playlist ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"search"}}),n("router-link",{attrs:{to:"/search/music"}},[t._v(" Recherche ")])],1),n("li",[n("MaterialIcon",{attrs:{icon:"settings"}}),n("router-link",{attrs:{to:"/advanced"}},[t._v(" Avancé ")])],1)])])},Y=[],z={name:"Home",methods:{shuffleAll:function(){b["a"].shuffleAll()}},components:{MaterialIcon:u["a"]}},J=z,W=(n("204c"),Object(p["a"])(J,U,Y,!1,null,"27cb9255",null)),B=W.exports;r["a"].use(F["a"]);var H=[{path:"/",name:"Home",component:B},{path:"/music/:path*",name:"Music List",component:function(){return n.e("list").then(n.bind(null,"1a33"))},props:function(t){return{type:"music",path:t.params.path}}},{path:"/advanced/",name:"Advanced",component:function(){return n.e("list").then(n.bind(null,"fbe6"))}},{path:"/radio/",name:"Radio",component:function(){return n.e("list").then(n.bind(null,"b3ad"))}},{path:"/podcasts/:podcast*",name:"Podcasts",component:function(){return n.e("list").then(n.bind(null,"2459"))},props:function(t){return{podcast:t.params.podcast}}},{path:"/search/:context",name:"Search Form",component:function(){return n.e("list").then(n.bind(null,"2d3b"))},props:!0},{path:"/playlist/:id?",name:"Playlist",component:function(){return n.e("list").then(n.bind(null,"2059"))},props:function(t){return{modal:!1,id:t.params.id}}}],K=new F["a"]({mode:"history",base:"/",routes:H}),X=K;r["a"].config.productionTip=!1,new r["a"]({router:X,data:function(){return{modalShown:!1,modalChild:"",modalParameter:"",notificationText:"",notificationShown:!1}},methods:{cleanFileName:function(t){if(!t)return"";try{return t=t.split("/"),t=t[t.length-1],t=t.split("."),t.length>1&&(t=t.slice(0,-1)),t=t.join("."),t.replace(/_/g," ")}catch(e){return console.warn("cleanFileName failure",e),t}},showNotification:function(t){var e=this;this.notificationText=t,this.notificationShown=!0,setTimeout((function(){e.notificationShown=!1}),3500)},showModal:function(t,e){this.modalShown=!0,this.modalChild=t,this.modalParameter=e},hideModal:function(){this.modalShown=!1}},render:function(t){return t(A)}}).$mount("#app")},"5f57":function(t,e,n){},"60a2":function(t,e,n){"use strict";n("5f57")},"70e0":function(t,e,n){},"9ebd":function(t,e,n){},a317:function(t,e,n){"use strict";n("ec79")},a799:function(t,e,n){},b01f:function(t,e,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("d3b7"),"http://"+window.location.host+"/api"),i={makeRequest:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,fetch(a+e,{method:"POST",body:JSON.stringify(n)});case 3:r=t.sent,t.next=9;break;case 6:return t.next=8,fetch(a+e);case 8:r=t.sent;case 9:if(r.ok){t.next=15;break}return t.next=12,r.text();case 12:return i=t.sent,console.warn("server error",i),t.abrupt("return",{error:i});case 15:return t.prev=15,t.next=18,r.json();case 18:r=t.sent,t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](15),console.log("no json response from server");case 24:return t.abrupt("return",r);case 25:case"end":return t.stop()}}),t,null,[[15,21]])})));function e(e,n){return t.apply(this,arguments)}return e}(),fetchFileList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/files/list",{path:"./"+(e||"")});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),search:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/search/"+e,{query:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getSoundOutput:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/media/output");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),setSoundOutput:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/media/output",{output:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),shuffleAll:function(){i.makeRequest("/media/play/music",{path:!1,random:!0})},play:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=s.length>3&&void 0!==s[3]&&s[3],t.next=3,i.makeRequest("/media/play/"+e,{recursive:"directory"==r,random:a,path:n,id:"playlist"===e?n:void 0,from:"playlist"===e?r:void 0});case 3:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}(),sendCommand:function(t){i.makeRequest("/media/command",{command:t})},stop:function(){i.makeRequest("/media/stop")},allPlaylists:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/all");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getPlaylist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/get",{id:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),createPlaylist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/create",{name:e,song:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),addToPlaylist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/add",{id:e,song:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),removePlaylist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/delete",{id:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),removeTrack:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/remove",{id:e,song:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),organizePlaylist:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/playlist/organize",{id:e,song:n,position:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}(),allRadios:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/radio/list");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),addRadio:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/radio/create",{name:e,url:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),playRadio:function(t){i.makeRequest("/radio/play",{url:t})},toggleFavoriteRadio:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/radio/toggle-favorite",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),removeRadio:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/radio/delete",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),allPodcasts:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/podcast/list");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),addPodcast:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/podcast/create",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),updatePodcast:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/podcast/update",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),viewPodcast:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/podcast/view",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),playPodcast:function(t,e){i.makeRequest("/podcast/play",{feedUrl:t,url:e})},removePodcast:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/podcast/delete",{url:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),regenerate:function(){i.makeRequest("/files/regenerate")},halt:function(){i.makeRequest("/media/halt")},getMetadata:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/media/metadata");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),fakeMetadata:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.makeRequest("/media/metadata/fake");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()};e["a"]=i},c107:function(t,e,n){},d132:function(t,e,n){"use strict";n("118a")},d549:function(t,e,n){},e42d:function(t,e,n){"use strict";n("70e0")},ec79:function(t,e,n){},efc4:function(t,e,n){"use strict";n("c107")}});
//# sourceMappingURL=app.ce1d526a.js.map